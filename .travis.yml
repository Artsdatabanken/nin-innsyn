language: node_js
node_js:
- '10'
directories:
- node_modules
script:
- yarn test
deploy:
  provider: releases
  api_key:
    secure: LUJresNXtsqmDinabl2zeyvFXq5GvPI2NZezhxw2Ru60gUK/qbdKdCA3/i8iY9v2ON04jj7ZoRYDZE+5plKaTtpUaDgyXm7uFWcK9dVCcOAUCOWXdVUMKE9ftD5jzHoBDWgNPjK24MTS8AGMSIlhCMDbiwR7N6iYORE334WT+XiVvBJdkHj1euNLdiLrMTCsKxxCgAs/j5mlqZuTgO+nAuWdIW1oGoUEH/xxNAhdwm9jKMzaO/iifguiapLIzi+c7PnZB4enAZLdFGtVJr26IGD+Nzxo7fTM3a+N3kqiQx7eTSx2qmcmW3vn1ZGzZhA+0xJ6gjDZydOOpuPXogXmaO9z8N43VEUYrvD8LqnJu2f0hcdNN1QodO8+WkX//MVTXfRXqInhk1S9AjShjwsYzJZoDJL6s6vlQ3/hNP0cVkb5n89319K8QBpUYef3Hk+C7kjDDeBrgwCMA81HSp6Wl9RWaX5wnvWHKfwh5YhCidCm08Ix32TLrB/Uan9uj0rd2rYw5Yprl8BUKZZRU6FL5w+QoxUjpe19P07fi2NL/37gXTu759zE4zLaVgzfJ8RIWwOD3DCarevnr4lnIvPcpdTMhiMmgd9ayCPwyyjnZDpJsBMVqO5VVcXKgLPOC7dSBXmO6k6h6NXlh+W1O29nbTE4R/JZTxecFRGNYXriHvE=
  file: build/*
  on:
    repo: Artsdatabanken/ratatouille
    tags: true
after_deploy:
  notifications:
    slack:
      template:
      - release %{repository_slug}
after_success:
- npm run report-coverage
notifications:
  slack:
    secure: boRuTnFbZmvMYN4U4cqEhd3TAetZrHC2uUNmrLu/oEgKMWRtBQMJATiV/dYuYki1zWz1OeF97dAwAZnJpDCH7S4Sv+Dskn75HUj0NAVKfxR/mH/MiQupNLe4eN3+5FfhzdQW+n8m/rLcnPT5RuAd4+xjUeGc4aAPuYPpi8IMKoIV6aXRSNBpZMGpjQuyV6DZMhUr5Rr/WUD0DwxJSzbXZsNFUdefVBrogeLl9GKcxWapSNSED3tzZyG7MexfiD3cdw6GWpwuAmNjKyTe2BA8aESUvuBcOPSk/z7ZqAxC0GOW8BEikEMowAK+nVUOYL4bbyTBvpa1808Fu9EWBxreBNH9nwG91s+zXLmNFt+cLMp6rozedPG6JuOCT4tDHdqRrrCubNmpNVczn1iY6iyPj1q7Cvk+s+kfugrdedmqr/aYhatnirGGxdAbHAluizkwAzbzP6gnD4i2FdxefJ77hrAI80Y/6wMzPHTWVCgVUZEyBZb6J+1C7JvcEinsnNC0MkOdvGBcCNUHEGc+L/clYhVN5W4CoqP5QxuatZjYhfPlIe4D4v51wgttu4IQN7FztZwvSzSVMKdONtbhFv3jOuyKsm/KQONEBs+7o9exNm5pPR1GLJfpjNO9vJJJ9K3b8ene+L0Irnv0SWu/mpl0+shbAkfrrQX9MJUT3ntXuaM=
before_install:
- yarn global add greenkeeper-lockfile@1
- export PATH=$PATH:`yarn global bin`
before_script: greenkeeper-lockfile-update
after_script: greenkeeper-lockfile-upload
